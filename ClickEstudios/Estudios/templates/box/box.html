{% extends "base/base.html" %}
{% block content %}
      {% load humanize %}
      <style>
            .nav .caja {
                  color: #ffc107;
                  font-weight: bolder;
                  transform: scale(1.1);
            }

      </style>

      <div class="   text-white overflow-auto d-flex flex-wrap align-content-start  w-100  rounded-5">
            {% if is_open %}
            <div class="w-100 vh-100">
                        <div class="">
                              {% include "box/components/filter.html" %}
                              {% include "box/components/table.html" %}
                        </div>
                  </div>
                  <div class="position-sticky bottom-0 w-100">
                        <a href="{% url "estudios:box-create" %}" class='mb-3'> 
                              <button class='btn bg-danger rounded-5 text-white '
                              >Cerrar  caja</button>
                        </a>
                        <div class="col-md-6">
                              <st>Balance de Apertura: {{ balance_apertura }}</st>
                        </div>
                        <div class="col-md-6">
                              <h6>Ingresos: ${{ ingresos|intcomma }}.00</h6>
                              <h6>Gastos: ${{ egresos|intcomma }}.00</h6>
                              <h6>Balance en Caja: ${{ balance_caja|intcomma }}.00</h6>
                        </div>
                  </div>
                  
            {% else %}
            <div class='d-flex  rounded-5 justify-content-center align-content-center flex-wrap mb2 h-100 w-100'>
                  <strong class='m-0 p-0'> Caja cerrada </strong>
                  <a href="{% url "estudios:box-create" %}" class="w-100 text-center mt-4">
                        <button class="btn bg-white bg-opacity-10 text-white  rounded-5 p-2 ps-4 pe-4">
                              Abrir Caja <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up-right-circle-fill" viewBox="0 0 16 16">
                                    <path d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m5.904 2.803a.5.5 0 1 1-.707-.707L9.293 6H6.525a.5.5 0 1 1 0-1H10.5a.5.5 0 0 1 .5.5v3.975a.5.5 0 0 1-1 0V6.707z"/>
                                    </svg>
                        </button>
                  </a>
            </div>
            {% endif %}
      </div>

      <script>
            function filterMovimientos(tipo) {
                  const rows = document.querySelectorAll('.movimiento-row');
                  rows.forEach(row => {
                        if (tipo === 'todos' || row.getAttribute('data-tipo') === tipo) {
                              row.style.display = '';
                        } else {
                              row.style.display = 'none';
                        }
                  });
            }
      </script>
{% endblock  %}
