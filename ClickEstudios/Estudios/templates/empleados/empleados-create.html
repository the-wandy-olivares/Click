{% extends "base/base.html" %}
{% block content %}


<div class="container">

      <form method="post">
            {% csrf_token %}
            <span class='d-none'>
                  {{form.username}}
            </span>
            <div class="form-row d-flex">
                  <div class="form-group col-md-6">
                        <label for="id_first_name">Nombre</label>
                        <input type="text" name="first_name" class="form-control" placeholder="Nombre" required id="id_first_name">
                  </div>
                  <div class="form-group col-md-6">
                        <label for="id_last_name">Apellido</label>
                        <input type="text" name="last_name" class="form-control" placeholder="Apellido" required id="id_last_name">
                  </div>
            </div>



            <div class="form-row d-flex flex-wrap">
                  <div class="form-group col-md-6">
                        <label for="id_email">Correo electrónico</label>
                        <input type="email" name="email" class="form-control" placeholder="Correo electrónico" required id="id_email">
                  </div>
                  <div class="form-group col-md-6">
                        <label for="id_password">Contraseña</label>
                        <input type="password" name="password" class="form-control" placeholder="Contraseña" required id="id_password">
                  </div>
            </div>
            <button type="submit" class="btn btn-primary" style='display: none;'> Crear usuario</button>
      </form>


</div>


<script>
      document.addEventListener('DOMContentLoaded', function() {
            const password = document.getElementById('id_password');
            const confirmPassword = document.createElement('input');
            confirmPassword.type = 'password';
            confirmPassword.name = 'confirm_password';
            confirmPassword.className = 'form-control';
            confirmPassword.placeholder = 'Confirmar Contraseña';
            confirmPassword.required = true;
            confirmPassword.id = 'id_confirm_password';

            const confirmPasswordLabel = document.createElement('label');
            confirmPasswordLabel.htmlFor = 'id_confirm_password';
            confirmPasswordLabel.innerText = 'Confirmar Contraseña';

            const formGroup = document.createElement('div');
            formGroup.className = 'form-group';
            formGroup.appendChild(confirmPasswordLabel);
            formGroup.appendChild(confirmPassword);

            password.parentNode.parentNode.insertBefore(formGroup, password.parentNode.nextSibling);

            const submitButton = document.querySelector('button[type="submit"]');
            submitButton.style.display = 'none';

            function validatePasswords() {
                  if (password.value === confirmPassword.value) {
                        submitButton.style.display = 'block';
                  } else {
                        submitButton.style.display = 'none';
                  }
            }

            password.addEventListener('input', validatePasswords);
            confirmPassword.addEventListener('input', validatePasswords);
      });

      const email = document.getElementById('id_email');
      const username = document.getElementById('id_username');

      email.addEventListener('input', function() {
            username.value = email.value;
      });
</script>
{% endblock  %}
