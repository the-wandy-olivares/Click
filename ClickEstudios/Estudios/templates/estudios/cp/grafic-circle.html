<style>
      #chartLabels {
            align-content: center;
      }
      @media (max-width: 600px) {
            #chartLabels {
                  align-content: start !important;
            }
            .myPieChart {
                  
            }
            #chartLabels {
                  /* color: wheat; */
                  background-color: #191919; 
            }
      }
      .span-mount {
            background-color: #212121;
      }
</style>
<div style="width: 100%; margin: auto; height: 18.5rem;" class="myPieChart m-0 overflow-auto">
      <div class="d-flex w-100">
            <div id="chartLabels" class="d-flex flex-wrap overflow-auto p-2 rounded-5" 
                  style="max-height: 19rem;">
            </div>
            <canvas id="myPieChart" class="ms-1 me-2 mt-5"  
            style="max-height: 7rem; max-width: 7rem; "></canvas>
      </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
var ctx = document.getElementById('myPieChart').getContext('2d');
var labels = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiem', 'Octubre', 'Noviembre', 'Diciembre'];
var data = [{{en}}, {{fe}}, {{ma}}, {{ab}}, {{my}}, {{ju}}, {{jul}}, {{ag}}, {{set}}, {{oc}}, {{nov}}, {{dic}}];

var backgroundColors = [
  'rgba(255, 99, 132, 0.2)',
  'rgba(54, 162, 235, 0.2)',
  'rgba(255, 206, 86, 0.2)',
  'rgba(75, 192, 192, 0.2)',
  'rgba(153, 102, 255, 0.2)',
  'rgba(255, 159, 64, 0.2)',
  'rgba(199, 199, 199, 0.2)',
  'rgba(83, 102, 255, 0.2)',
  'rgba(255, 206, 186, 0.2)',
  'rgba(75, 192, 92, 0.2)',
  'rgba(153, 202, 255, 0.2)',
  'rgba(255, 159, 164, 0.2)'
];

// Crear el gráfico
var myPieChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: labels,
    datasets: [{
      label: '',
      data: data,
      backgroundColor: backgroundColors,
      borderColor: backgroundColors.map(color => color.replace('0.2', '1')), // Bordes sólidos
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        display: false // Ocultar la leyenda para personalizarla manualmente
      },
      tooltip: {
        enabled: true
      }
    }
  }
});

// Mostrar etiquetas en un div separado
var chartLabels = document.getElementById('chartLabels');
chartLabels.innerHTML = labels.map((label, index) => {
      return `
      <div style="display: flex; align-items: center; margin-bottom: 4px;" >
            <span class='span-mount d-flex text-white-50 p-1 ps-3  rounded-5'>
                  <strong > 
                        ${label}  
                   </strong>
                   <div style="
                         width: 22px; height: 22px;
                         background-color: ${backgroundColors[index].replace('0.2', '0.8')};
                         margin-right: 8px;
                         border-radius: 4px;"
                         class='d-flex justify-content-center ms-2 flex-wrap align-content-center rounded-circle p-0'>
                         <strong style='font-size:12px;' class='text-black'>
                               ${data[index]}
                         </strong>
                   </div>
            </span>
</div>`;
}).join('');
</script>
