{% extends "base/base.html" %}
{% block content %}
      <style>
            
      </style>
      <section class='overflow-auto '>
            <form action="" method="post">
                  
                  {% csrf_token %}
            <div style="width: 30rem; height: 10rem;" class="container"> 
                        {{form.name_client}}
                        {{form.phone_client}}
                        {{form.email_client}}
                  </div>
                  <label for="contact_preference" class="text-white">Preferencia de contacto:</label>
                  <select id="contact_preference" name="contact_preference" onchange="toggleContactFields()">
                        <option value="none">Ninguno</option>
                        <option value="email">Correo</option>
                        <option value="phone">Numero</option>
                        <option value="both">Ambos</option>
                  </select>
                    <div>
                              <button id="submit_button" class="d-none">Enviar</button>
                    </div>
            </form>
            <script>
                    function toggleContactFields() {
                              var preference = document.getElementById('contact_preference').value;
                              var phoneField = document.querySelector('#id_phone_client');
                              var emailField = document.querySelector('#id_email_client');
                              if (preference === 'none') {
                                      phoneField.style.display = 'none';
                                      emailField.style.display = 'none';
                              } else if (preference === 'email') {
                                      phoneField.style.display = 'none';
                                      emailField.style.display = 'block';
                              } else if (preference === 'phone') {
                                      phoneField.style.display = 'block';
                                      emailField.style.display = 'none';
                              } else if (preference === 'both') {
                                      phoneField.style.display = 'block';
                                      emailField.style.display = 'block';
                              }
                    }

                    // Initialize the fields based on the current selection
                    document.addEventListener('DOMContentLoaded', function() {
                              toggleContactFields();
                    });

                  document.getElementById('id_name_client').addEventListener('input', function() {
                        var submitButton = document.getElementById('submit_button');
                        if (this.value.length > 4) {
                              submitButton.classList.remove('d-none');
                        } else {
                              submitButton.classList.add('d-none');
                        }
                  });
                    
            </script>

      </section>

{% endblock  %}